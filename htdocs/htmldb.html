<script type="text/javascript" src="../js/ppp/Base.js"></script>
<script type="text/javascript" src="../js/ppp/utf8.js"></script>
<script type="text/javascript" src="../js/ppp/util.js"></script>
<script type="text/javascript" src="../js/ppp/mapping.js"></script>
<script type="text/javascript" src="../js/ppp/mmp.js"></script>
<script type="text/javascript" src="../js/ppp/meteor.js"></script>
<script type="text/javascript" src="../js/ppp/serialization.js"></script>
<script type="text/javascript" src="../js/sha256.js"></script>
<script type="text/javascript" src="../js/SyncDB.js"></script>
<script type="text/javascript">
    var schema = new SyncDB.Schema({
	    id : new SyncDB.Types.Integer(new SyncDB.Flags.Key(), new SyncDB.Flags.Auto()),
	    foo : new SyncDB.Types.String(new SyncDB.Flags.Cached()),
	});
    var con = new meteor.Connection("/dbsync/server.pike", {});
    var mplex = new meteor.Multiplexer(con);
    var chan = mplex.get_channel("control");
    var db = new SyncDB.LocalTable("test", schema,
	new SyncDB.MeteorTable("test", schema, chan)
    );
    function indices(obj) {
	var a = [];
	for (var x in obj) {
	    a.push(x);
	}

	return a;
    }
    function x(id) {
	return function()
	{ console.log("%o: %o", id, Array.prototype.slice.call(arguments));
	};
    }
    con.init();
</script>
<body>
<h1>Use the javascript console!</h1>

